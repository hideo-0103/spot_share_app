<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @spot.name %>
</p>

<%= link_to 'Edit', edit_spot_path(@spot) %> |
<%= link_to 'Back', spots_path %>

<div id="map" style="width: 800px; height: 400px;"></div>

<script>
  // handler = Gmaps.build('Google');
  // handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  //   markers = handler.addMarkers(<%= raw @hash.to_json %>);
  //   handler.bounds.extendWith(markers);
  //   handler.fitMapToBounds();
  // });
  google.maps.event.addDomListener( window, 'load', initMap );
  var geocoder;
  var map;
  var marker;
  function initMap() {
    geocoder = new google.maps.Geocoder();
    geocoder.geocode({
        'address': `${gon.spot_address}`// TAM 東京
    }, function(results, status) { // 結果
      if (status === google.maps.GeocoderStatus.OK) { // ステータスがOKの場合
        map = new google.maps.Map(document.getElementById('map'), {
                center: results[0].geometry.location, // 地図の中心を指定
               zoom: 19 // 地図のズームを指定
           });
         marker = new google.maps.Marker({
               position: results[0].geometry.location, // マーカーを立てる位置を指定
                map: map // マーカーを立てる地図を指定
           });
      } else { // 失敗した場合
        console.group('Error');
        console.log(results);
        console.log(status);
      }
    });
  }
</script>