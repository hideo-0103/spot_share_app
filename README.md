# README


場所共有アプリ

Google map api を用いて場所を共有
例)スケボーの練習スポット
例)ダンスの練習ができるスポット(公民館、体育館)

# 第一段階
- ユーザー登録
- spot登録
- spot編集機能
- category登録&spotに対して紐付けて保存
- categoryを残しつつ紐づきを解除(idを元に中間テーブルからのみ削除)
- tag登録&spotに対して紐付けて保存
- tagを残しつつ紐づきを解除(idを元に中間テーブルからのみ削除)
- googlemap導入、住所を元にピン挿す
- ユーザーの位置情報を取得してその位置を中心にマップ表示
- ↪︎ 

## アップローダー
- carrierwave

## 使用するGem
- carrierwave
- active_hash
- ancestry(仮)
- devise
- gmaps4rails
- geocoder

## 外部ライブラリ
- googleMapAPI


## google map apiでやること
- ユーザーの位置情報取得
- スポットの住所からマップ上にピンを挿す(Geocodingで座標に変換)
- ユーザーの位置情報を中心に検索カテゴリ&タグにマッチしたスポットのピンを挿す

## 都道府県の表示(優先順位：低)
- アンセストリーで親カテゴリー、子カテゴリーで紐付けしてエリア > 県 > 市まで紐付けする
  - 登録時にはモデルファイルでparent + child + grandChild + それ以下の文字列を繋いでString型で保存
  ### or
  - スポット登録時には手打ちで入力してもらう。(とりあえず最初はこれで）
  - 検索用のモデルとして使用する。
  - nameカラムを用いてスポットのaddresカラムに対して含む検索を行う

##### デメリット：一度に登録する情報が多すぎてアクセス制限がかかる。
##### メリット  ：孫の情報から親、子の情報を引っ張ってこれる。
### or
- アクティブハッシュで持つ
  - カラムを :id,:name,parent_id,の形で持たせる
##### デメリット：データの呼び出しがめんどくさい(孫から親)。
##### メリット  ：DBに保存しなくてもいいのでアクセス制限がかからない。

### ユーザー
- ユーザーには最初にユーザー情報(ニックネーム、パスワード、位置情報の使用許可)を入力してもらう
- ユーザーがスポットをお気に入り登録できる
- ユーザーの位置情報とカテゴリー、タグをもとに周辺のスポットを全てマップ上にピンを表示させる。

### マップ
- 表示しているピンからgoogleMapAppに飛ばしてナビできるようにする

### 検索
- カテゴリーごとにスポットを検索できる
- 住所で検索できる or ユーザーの現在位置
- タグで検索できる
- 組み合わせ検索ができる

### スポット
- スポットの住所はtext型で登録
- スポットに対してタグ(室内OR屋外、個室、体育館など)を紐付けできる。
  - タグはインクリメンタルサーチで表示
  - 見つからない場合は入力枠を作成し、そこに追加してもらう。
- スポットに対して1枠何時間なのか、1枠いくらなのか、予約方法などの情報を登録できる。
  - active_hashを用いて・1枠の利用時間(30分刻み)・予約方法(現地受付、tel、ネット)を作成
  - 金額はintで受け取る
- スポットに対して施設名、説明文を登録できる。
- スポットに対して複数枚画像を登録できる
- スポットに対してgoogleMapApiで登録された住所をもとに地図上にピンを表示させる
  - 住所はtext型に変換して保存して引数に渡す。